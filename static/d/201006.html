<?xml version="1.0" encoding="iso-2022-jp"?>
<!DOCTYPE
 html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
 "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja">
<head>
<meta http-equiv="content-type" content="text/html; charset=iso-2022-jp" />
<meta http-equiv="content-style-type" content="text/css" />
<meta name="viewport" content="width=device-width; initial-scale=1.0;">
<link href="mailto:hiro@nekomimist.org" rev="made" />
<link href="index.html" rel="index" />
<link href="../style.css" type="text/css" rel="stylesheet" />
<link href="diary.css" type="text/css" rel="stylesheet" />
<title>ねこみみど〜らくにっき in Jun, 10</title>
<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-185248-2";
urchinTracker();
</script>
</head>
</head>
<!--#exec cmd="./log"-->

<body>
<h1>ねこみみど〜らくにっき in Jun, 10</h1>
<p style="text-align:right;">
あるいは、ねこみみ嗜好者の<span class="laud">猫</span>耳東風な日々の雑記
</p>

<div class="index">
<a href="topics.html">topicsページへ行く</a> /
<a href="index.html">最新日記に戻る</a> / 
<a href="../index.shtml">ねこみみすと工房トップページに戻る</a><br />
</div>

<div class="main">

<!--Generated by nDiary version 0.9.4-->
<!--Last-Modified :Tue, 25 Sep 2012 12:51:35 GMT--><div class="oneday">
<h2 class="date"><a id="d06" href="201006.html#d06" class="date">Jun.6,2010 (Sun)</a></h2>
<div class="day">

	<div class="topic">

	<h3><a id="d06_t1" href="201006.html#d06_t1" class="topic">■</a>ZFSとiSCSIとわたし [<a href="comp2010.html#t201006">COMP</a>]</h3>	<div class="topicbody">

	<p><a id="d06_t1_1" href="201006.html#d06_t1_1">+</a>
	仕事が忙しい。残業代を稼げるのはいいがストレスが溜るぜホント。</p>

	<p><a id="d06_t1_2" href="201006.html#d06_t1_2">+</a>
	そんなわけで、発散のために2TBのHDD<span class="footnoteref">(<a href="#f20100606_1" id="b20100606_1">*1</a>)</span>と、今さらDDR2-1066のメモリ8GB分を購入してみた。</p>

	<p><a id="d06_t1_3" href="201006.html#d06_t1_3">+</a>
	まず、FIENAに購入したメモリを入れて、余ったDDR2-800の8GB分をKONAに入れた。KONAは元々メモリ5GB(512MB×2と2GB×2)だったので、3GBの増加に過ぎないが、まぁ、ZFS使うのにメモリはあるに越したことはないだろう。</p>

	<p><a id="d06_t1_4" href="201006.html#d06_t1_4">+</a>
	新規の2TB-HDDと手持ちの余剰500GB-HDDはKONAに乗せてZFSのストレージプールに入れた。続いてKONA上でistgtを動かして、ZFS上に1TBのiSCSIのイメージを置いて、FIENAでiSCSI initiatorを動かす<span class="footnoteref">(<a href="#f20100606_2" id="b20100606_2">*2</a>)</span>。動かしてしまえば普通のHDDに見えるので、FIENA内蔵の1TB HDD(WD10EADS)の中身をざくっと移動しておしまい。</p>

	<p><a id="d06_t1_5" href="201006.html#d06_t1_5">+</a>
	iSCSIのスループットだが70MB/secは出ているの特に問題を感じない。念のためKONAもFIENAもiSCSI用に専用のGbEを与えたが、LANとSANが物理的に一体なのでさほど意味はなかろうな。ここを分けるのは今後の課題だが、リフォームでもしないと部屋間の配線はいじりづらいぜ。</p>

	<p><a id="d06_t1_6" href="201006.html#d06_t1_6">+</a>
	KONAのZFSに冗長性がないのも難点として残る。iSCSI targetになってる部分は最終的にはWindows Home Serverにバックアップが取られるのでいいのだが、それ以外の部分がね。HDDを増設するにも、KONAであるML115G1のS-ATAもHDDベイもすでに埋まっているので、何らかのハードウェア的追加が必要だ。ポートマルチプライヤ対応の外付けeSATAケースって手もあるが、スループット重視でeSATA×4のI/Fとケースを買うのがよいかな。</p>

	</div>

	</div>

	<div class="footnote">
		<a id="f20100606_1" href="#b20100606_1">*1</a>: 今回はWDではなくSeagateのBarracuda LP。<br />
		<a id="f20100606_2" href="#b20100606_2">*2</a>: 標準でiSCSI対応なので楽々。<br />
	</div>
</div>


</div>

<div class="oneday">
<h2 class="date"><a id="d07" href="201006.html#d07" class="date">Jun.7,2010 (Mon)</a></h2>
<div class="day">

	<div class="topic">

	<h3><a id="d07_t1" href="201006.html#d07_t1" class="topic">■</a>KONAさんHDD拡張 [<a href="comp2010.html#t201006">COMP</a>]</h3>	<div class="topicbody">

	<p><a id="d07_t1_1" href="201006.html#d07_t1_1">+</a>
	外付けHDDケースは<a href="http://www.oliospec.com/item_detail/itemCode,GX-4045B/">OLIOSPECのコレ</a>かな。安い上にマルチレーンもeSATA4本も対応可能なのがよい。eSATAカードはマルチレーン対応のカードを買うかeSATA4本のカードを買うか悩み中。楽なのは前者だが、4本くらいなら後者でもいいよなー。</p>

	<p><a id="d07_t1_2" href="201006.html#d07_t1_2">+</a>
	そういうことからすると、<a href="http://www.oliospec.com/item_detail/itemCode,GX-4045B-RAID/">このセット</a>? ……よく見ると単品で買ったほうが安いじゃないか。なんじゃこら。</p>

	</div>

	</div>

	<div class="topic">

	<h3><a id="d07_t2" href="201006.html#d07_t2" class="topic">■</a>iSCSIとVMware [<a href="comp2010.html#t201006">COMP</a>]</h3>	<div class="topicbody">

	<p><a id="d07_t2_1" href="201006.html#d07_t2_1">+</a>
	ところで、VMware workstation上のゲストのXP SP3上でiSCSI initiator動かすのと、ホストのWindows7でiSCSI initiator動かして、その上のVMwareのディスクイメージを置くのではどっちが速いのだろうな? ちょっと試してみるか……。</p>

	</div>

	</div>

</div>


</div>

<div class="oneday">
<h2 class="date"><a id="d13" href="201006.html#d13" class="date">Jun.13,2010 (Sun)</a></h2>
<div class="day">

	<div class="topic">

	<h3><a id="d13_t1" href="201006.html#d13_t1" class="topic">■</a>ねむい [MISC]</h3>

	<div class="topicbody">

	<p><a id="d13_t1_1" href="201006.html#d13_t1_1">+</a>
	はやぶさも帰ってきたのではやく寝ようか。</p>

	</div>

	</div>

</div>


</div>

<div class="oneday">
<h2 class="date"><a id="d20" href="201006.html#d20" class="date">Jun.20,2010 (Sun)</a></h2>
<div class="day">

	<div class="topic">

	<h3><a id="d20_t1" href="201006.html#d20_t1" class="topic">■</a>ZFS構成変更 [<a href="comp2010.html#t201006">COMP</a>]</h3>	<div class="topicbody">

	<p><a id="d20_t1_1" href="201006.html#d20_t1_1">+</a>
	土日が無事休みになったので、メインPCのFIENAのケース交換(Antec P182→CORSAIR CC-700D)をやろうかと思ったのだが、どーも気がすすまなかった所にちょうとHighpoint RocketRAID2314<span class="footnoteref">(<a href="#f20100620_1" id="b20100620_1">*1</a>)</span>とHDDケースが届いたので、先にKONAのHDD構成変更に手をつけることにした。</p>

	<p><a id="d20_t1_2" href="201006.html#d20_t1_2">+</a>
	まずはeSATA×4のHDDケースに手持ちのWD5000KSとST32000542ASを入れる。RocketRAID2314はeSATA×4のRAIDカードだが、何が何でもアレイにしないとHDDが見えないので、仕方なく1台づつでJBOD構成とする。FreeBSD上ではhptrr経由でそれぞれda0/da1として見える。</p>

	<p><a id="d20_t1_3" href="201006.html#d20_t1_3">+</a>
	で、da0/da1でzpoolを1つ作り、既存のad8/ad10(WD5000AAKSとST32000542AS)のzpoolの中身をコピーする。本当は直接attachできればいいのだが、JBODにした以上管理領域に容量を食われてしまうため、それはできない。なので、地味な作業でコピーする。</p>

	<p><a id="d20_t1_4" href="201006.html#d20_t1_4">+</a>
	コピー完了したら、ad8/ad10のpoolはexportした後に、外づけHDDケースに移動してRocketRAID2314の配下に入れ、やはりJBOD構成としてda2/da3とする。あとはda0にda2を、da1にda3をattachしておしまい。これでHDD4台で2.5TBのmirroring構成となった。</p>

	<p><a id="d20_t1_5" href="201006.html#d20_t1_5">+</a>
	容量が足りなくなったら、まず本体のSATAがあと2本空いてるのでそこに足す。その後はda0/da2が500GBのHDDだから、このへんをdetach→デカいのに交換してattachで容量拡大ができるのではないかな。</p>

	</div>

	</div>

	<div class="footnote">
		<a id="f20100620_1" href="#b20100620_1">*1</a>: 644でない理由は値段だけー。<br />
	</div>
</div>


</div>

<div class="oneday">
<h2 class="date"><a id="d22" href="201006.html#d22" class="date">Jun.22,2010 (Tue)</a></h2>
<div class="day">

	<div class="topic">

	<h3><a id="d22_t1" href="201006.html#d22_t1" class="topic">■</a>きょうのよしなしごと [MISC][<a href="comp2010.html#t201006">COMP</a>][<a href="bike.html#t201006">BIKE</a>]</h3>	<div class="topicbody">

	<p><a id="d22_t1_1" href="201006.html#d22_t1_1">+</a>
	今月はボーナス月な上に残業が多いので収入が多い。散財せよと言わんばかりではないか!</p>

	<p><a id="d22_t1_2" href="201006.html#d22_t1_2">+</a>
	とはいえ、PC系はZFS+iSCSI対応で息切れしたので、買うとしても軽い物でいいや。デスクトップ上でTVをながら見できる環境がちょっと欲しいだろうか。</p>

	<p><a id="d22_t1_3" href="201006.html#d22_t1_3">+</a>
	自転車系はいよいよホイールを交換するか。うちのRNC7のコンポはほぼ全面的にUltragraなので同じくUltegraグレードのWH-6700が無難だが、ちょっと外してZONDA 2-way fitでもいいかもしれない。</p>

	</div>

	</div>

</div>


</div>

<div class="oneday">
<h2 class="date"><a id="d26" href="201006.html#d26" class="date">Jun.26,2010 (Sat)</a></h2>
<div class="day">

	<div class="topic">

	<h3><a id="d26_t1" href="201006.html#d26_t1" class="topic">■</a>自転車のホイール [<a href="bike.html#t201006">BIKE</a>]</h3>	<div class="topicbody">

	<p><a id="d26_t1_1" href="201006.html#d26_t1_1">+</a>
	ま、日本のメーカーで揃えるのがいいかな、ってことで、WH-6700を発注してみた。例によってブツがあるかどうかはわからないけれど :-)</p>

	<p><a id="d26_t1_2" href="201006.html#d26_t1_2">+</a>
	んで、せっかくWH-6700ならタイヤはチューブレスだよねってことで、IRCの安いチューブレス(ROAD LITE TUBELESS)にしてみた。今使ってるWH-R500は安物クリンチャーのPanaracer Stradius Refrectに安いブチルチューブだから、クリンチャーとチューブレスの比較によいかなということで。</p>

	<p><a id="d26_t1_3" href="201006.html#d26_t1_3">+</a>
	で、いっしょにCS-5700(12-25)も注文した。今WH-R500につけてるCS-6700(12-25)をWH-6700に移動して、CS-5700ををWH-R500につける予定。で、WH-6700が外用で、WH-R500が予備装備を兼ねたローラー台用。カンペキだ。</p>

	</div>

	</div>

	<div class="topic">

	<h3><a id="d26_t2" href="201006.html#d26_t2" class="topic">■</a>健康診断があった [MISC]</h3>

	<div class="topicbody">

	<p><a id="d26_t2_1" href="201006.html#d26_t2_1">+</a>
	去年の健康診断時は103.4kgで今年は77.8kgなので、一年で約26kg減。仕事が忙しくなってからちょっと間食が増えたので、今年に入ってから4kg程度しか減ってないし、GW以降完全に足踏み状態。夏場に向けてもうちょっとがんばろう。</p>

	</div>

	</div>

</div>


</div>

<div class="oneday">
<h2 class="date"><a id="d30" href="201006.html#d30" class="date">Jun.30,2010 (Wed)</a></h2>
<div class="day">

	<div class="topic">

	<h3><a id="d30_t1" href="201006.html#d30_t1" class="topic">■</a>きょうのよしなしごと [<a href="comp2010.html#t201006">COMP</a>]</h3>	<div class="topicbody">

	<p><a id="d30_t1_1" href="201006.html#d30_t1_1">+</a>
	先日WD5000KSが(たぶん)オーバーヒートで悲鳴を上げていたので、交換用にBarracuda LPの2TBモノを2つゲット。これで今月2TBを4本買ったことになる。まぁ、zpoolに余裕ができるのはいいことだよな。</p>

	</div>

	</div>

</div>


</div>

<!--ruby 1.9.3 (2012-04-20) [i386-cygwin]-->


</div>

<div class="side">
<h2>サイト内検索</h2>
<!--#include file="googlesearch"-->
<h2>その他</h2>
<!--#include file="othersidebar"-->
<h2>キャンペーンな風味</h2>
<!--#include file="campaign"-->
<h2>Topics</h2>
<!--#include file="topics"-->
<h2>Pastdays</h2>
<script type="text/javascript">
  document.write('<!--#include file="lastupdate"-->');
</script>
<noscript>
<!--#include file="lastupdate.flat"-->
</noscript>
</div>
<div class="index" style="clear:both">
<a href="index.html">return</a> / 
<a href="../index.shtml">top</a>
</div>
<address>
いずみたすく
<a href="mailto:hiro@nekomimist.org">&lt;hiro@nekomimist.org&gt;</a>
</address>
</body>
</html>
